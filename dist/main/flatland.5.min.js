"use strict";!function(e){function t(){}function i(e){for(var t=0,i=0,a=void 0;i<e.length;i++)a=(i+1)%e.length,
t+=e[i].x*e[a].y,t-=e[a].x*e[i].y;return t/2}function a(e,t,i,a){
t&&i||(e.computeBoundingBox(),t=t||e.boundingBox.min,i=i||e.boundingBox.max);
var s=new a.Vector2(0-t.x,0-t.y),r=new a.Vector2(i.x-t.x,i.y-t.y),n=e.faces;
e.faceVertexUvs[0]=[];for(var o=0;o<n.length;o++){var l=e.vertices[n[o].a],h=e.vertices[n[o].b],c=e.vertices[n[o].c];
e.faceVertexUvs[0].push([new a.Vector2((l.x+s.x)/r.x,(l.y+s.y)/r.y),new a.Vector2((h.x+s.x)/r.x,(h.y+s.y)/r.y),new a.Vector2((c.x+s.x)/r.x,(c.y+s.y)/r.y)]);
}e.uvsNeedUpdate=!0}var s="Flatland",r="0.0.3",n="http://flatland.loop.coop/",o=e.Flatland=$traceurRuntime.createClass(function(){
var t=void 0!==arguments[0]?arguments[0]:{},i={THREE:o.stubs.THREE,
originMarkers:!1,antialias:!0,wrap:e.document?e.document.body:o.stubs.body,
WINDOW:e.innerWidth?e:o.stubs.window};if(i.width=i.WINDOW.innerWidth,i.height=i.WINDOW.innerHeight,
Object.assign(this,i,t),this.id=0,this.els=[],this.ids={},this.focus=0,this.materials={},
this.geometries={},this.textureLoader=new this.THREE.TextureLoader,this.svgLoader=new this.THREE.SVGLoader,
this.camera=new this.THREE.PerspectiveCamera(25,this.width/this.height,1,1e3),this.camera.position.set(0,2,10),
this.scene=new this.THREE.Scene,this.renderer=new this.THREE.WebGLRenderer({
antialias:!0}),this.renderer.setSize(this.width,this.height),this.renderer.shadowMap.enabled=!0,
this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.wrap.appendChild(this.renderer.domElement),
this.controls=new this.THREE.OrbitControls(this.camera,this.wrap),this.add({
class:o.El.Light.Ambient,color:16777215,intensity:.3}),this.originMarkers){
var a=new this.THREE.Mesh(new this.THREE.CubeGeometry(.1,.1,.1),new this.THREE.MeshBasicMaterial({
color:16777215}));a.position.set(0,0,0),this.scene.add(a);var s=new this.THREE.Mesh(new this.THREE.CubeGeometry(.1,.1,.1),new this.THREE.MeshBasicMaterial({
color:16711680}));s.position.set(1,0,0),this.scene.add(s);var r=new this.THREE.Mesh(new this.THREE.CubeGeometry(.1,.1,.1),new this.THREE.MeshBasicMaterial({
color:65280}));r.position.set(0,1,0),this.scene.add(r);var n=new this.THREE.Mesh(new this.THREE.CubeGeometry(.1,.1,.1),new this.THREE.MeshBasicMaterial({
color:255}));n.position.set(0,0,1),this.scene.add(n)}},{render:function(){
void 0!==arguments[0]?arguments[0]:{};this.renderer.render(this.scene,this.camera);
},add:function(){var e=void 0!==arguments[0]?arguments[0]:{},t=e.id=this.id++,i=this.els.length,a=this.ids[t]=this.els[i]=new e.class(e,this);
return a.ref&&this.scene.add(a.ref),t},edit:function(){var e=void 0!==arguments[0]?arguments[0]:{},t=this.ids[e.id];
t&&t.edit(e)},trigger:function(e){var t=this;t.ids,t.id},getMaterial:function(e,t,i){
if(this.materials[e])return this.materials[e];var a=this.textureLoader.load(e);
return a.wrapS=a.wrapT=this.THREE.MirroredRepeatWrapping,a.repeat.set(t,t),i?this.materials[e]=new this.THREE.MeshBasicMaterial({
color:16777215,map:a,wireframe:!1}):this.materials[e]=new this.THREE.MeshLambertMaterial({
color:10066329,map:a,wireframe:!1})},getGeometry:function(e,t){var s=this;
return this.geometries[e]?this.geometries[e]:void this.svgLoader.load(e,function(r){
if("parsererror"===r.tagName)return console.warn("Cannot parse "+e);
var n=parseInt(r.getAttribute("width")),o=parseInt(r.getAttribute("height")),l=[];
if(n!==o)return console.warn("width "+n+" !== height "+o);for(var h=0,c=void 0;c=r.childNodes[h++];)if(c.tagName){
if("polygon"!==c.tagName.toLowerCase())return console.warn(e+" unexpected node.tagName");
l.push([]);for(var u=c.getAttribute("points").replace(/\s+/g," ").replace(/\s+$/,"").split(" "),d=0,f=void 0,E=void 0;f=u[d++];)E=f.split(","),
l[l.length-1].push(new s.THREE.Vector2(E[0]/n-.5,-E[1]/n+1))}for(var p=new s.THREE.Shape(l.shift()),m=0,g=void 0;g=l[m++];)0>i(g)&&(g.reverse(),
console.log("Fixed a clockwise hole!")),g.unshift(g[0]),p.holes.push(new s.THREE.Path(g));
var w=new s.THREE.ExtrudeGeometry(p,{amount:.02,steps:1,material:0,
extrudeMaterial:1,bevelEnabled:!1,bevelThickness:.1,bevelSize:.2,
bevelSegments:1});a(w,{x:-.5,y:0},{x:.5,y:1},s.THREE),t(w)},function(){
console.log("Loading SVG..."),t(!1)},function(e){console.warn("Error loading SVG!",e),
t(!1)})}},{});o.NAME=s,o.VERSION=r,o.HOMEPAGE=n,o.stubs={window:{
innerWidth:800,innerHeight:600},body:{appendChild:t},THREE:{PerspectiveCamera:$traceurRuntime.createClass(function(){
this.position={set:t}},{},{}),Scene:$traceurRuntime.createClass(function(){},{
add:function(){}},{}),WebGLRenderer:$traceurRuntime.createClass(function(){},{
setSize:function(){}},{}),OrbitControls:$traceurRuntime.createClass(function(){},{},{}),
AmbientLight:$traceurRuntime.createClass(function(){},{},{}),TextureLoader:$traceurRuntime.createClass(function(){},{},{}),
SVGLoader:$traceurRuntime.createClass(function(){},{load:function(e,t){
t({getAttribute:function(){return 1024},childNodes:[xc]})}},{}),MeshBasicMaterial:$traceurRuntime.createClass(function(){},{},{}),
MirroredRepeatWrapping:8,Vector2:$traceurRuntime.createClass(function(){},{},{}),
Shape:$traceurRuntime.createClass(function(){},{},{}),Path:$traceurRuntime.createClass(function(){},{},{}),
ExtrudeGeometry:$traceurRuntime.createClass(function(){},{},{})}};
}("object"==("undefined"==typeof global?"undefined":$traceurRuntime.typeof(global))?global:this),
!function(e){e.Flatland.El=$traceurRuntime.createClass(function(e,t){},{},{});
}("object"==("undefined"==typeof global?"undefined":$traceurRuntime.typeof(global))?global:this),
!function(e){e.Flatland.El.Cutout=function(t){function i(t,a){var s;
$traceurRuntime.superConstructor(i).call(this,t,a);var r={bitmap:e.Flatland.HOMEPAGE+"/support/assets/test-1024.jpg",
svg:e.Flatland.HOMEPAGE+"/support/assets/test.svg",x:0,y:0,z:0,xRotate:0,
yRotate:0,zRotate:0,xyScale:null,xScale:1,yScale:1,zScale:1,repeat:1,
shadow:!0,visible:!0,luminous:!1};Object.assign(this,r,t,{app:a}),this.material=a.getMaterial(this.bitmap,this.repeat,this.luminous),
a.getGeometry(this.svg,(s=this,function(e){e&&(s.ref=new a.THREE.Mesh(e,new a.THREE.MultiMaterial([s.material,s.material])),
null!=s.xyScale&&(s.xScale=s.yScale=s.xyScale),s.ref.position.set(s.x,s.y,s.z),s.ref.scale.set(s.xScale,s.yScale,1),
s.ref.visible=s.visible,s.ref.rotation.set(s.xRotate*Math.PI/180,s.yRotate*Math.PI/180,s.zRotate*Math.PI/180),
s.luminous||(s.ref.receiveShadow=s.shadow,s.ref.castShadow=s.shadow),a.scene.add(s.ref));
}))}return $traceurRuntime.createClass(i,{},{},t)}(e.Flatland.El);
}("object"==("undefined"==typeof global?"undefined":$traceurRuntime.typeof(global))?global:this),
!function(e){e.Flatland.El.Light=function(e){function t(e,i){$traceurRuntime.superConstructor(t).call(this,e,i);
}return $traceurRuntime.createClass(t,{},{},e)}(e.Flatland.El)}("object"==("undefined"==typeof global?"undefined":$traceurRuntime.typeof(global))?global:this),
!function(e){e.Flatland.El.Light.Ambient=function(e){function t(e,i){
$traceurRuntime.superConstructor(t).call(this,e,i);var a={color:16777215,
intensity:.5};Object.assign(this,a,e,{app:i}),this.ref=new i.THREE.AmbientLight(this.color,this.intensity);
}return $traceurRuntime.createClass(t,{},{},e)}(e.Flatland.El.Light);
}("object"==("undefined"==typeof global?"undefined":$traceurRuntime.typeof(global))?global:this),
!function(e){e.Flatland.El.Light.Spot=function(e){function t(e,i){
$traceurRuntime.superConstructor(t).call(this,e,i);var a={x:0,y:0,
z:0,color:16777215,intensity:.5,distance:40,angle:30,penumbra:.2,
decay:0,lookAt:{x:0,y:0,z:0},shadow:{enabled:!0,near:.5,mapSize:2048
}};if(Object.assign(this,a,e,{app:i}),this.ref=new i.THREE.SpotLight(this.color,this.intensity,this.distance,this.angle*Math.PI/180,this.penumbra,this.decay),
this.ref.position.set(this.x,this.y,this.z),this.ref.castShadow=this.shadow.enabled,
this.ref.shadow.camera.near=this.shadow.near,this.ref.shadow.mapSize.width=this.shadow.mapSize,
this.ref.shadow.mapSize.height=this.shadow.mapSize,this.ref.lookAt(new i.THREE.Vector3(this.lookAt.x,this.lookAt.y,this.lookAt.z)),
i.originMarkers){var s=new i.THREE.Mesh(new i.THREE.CubeGeometry(.1,.1,.1),new i.THREE.MeshBasicMaterial({
color:this.color}));s.position.set(0,0,0),this.ref.add(s)}}return $traceurRuntime.createClass(t,{},{},e);
}(e.Flatland.El.Light)}("object"==("undefined"==typeof global?"undefined":$traceurRuntime.typeof(global))?global:this);



//\\//\\ built by Oopish Make 0.0.9 //\\//\\ http://ootility.oopish.com //\\//\\
